spring:
  application:
    name: server

  # Database (Supabase PostgreSQL)
  # 주석 처리하여 H2 인메모리 DB 사용 또는 아래 주석 해제하여 Supabase 사용
  # datasource:
  #   url: jdbc:postgresql://db.wzchbdlcnycaimiowcei.supabase.co:5432/postgres?sslmode=require&connectTimeout=30&socketTimeout=30&loginTimeout=30
  #   username: postgres
  #   password: "WSQ4E$sGfEksB$h"
  #   driver-class-name: org.postgresql.Driver
  #   hikari:
  #     connection-timeout: 30000
  #     maximum-pool-size: 5
  #     minimum-idle: 1
  #     idle-timeout: 300000
  #     max-lifetime: 600000
  #     leak-detection-threshold: 60000
  #     initialization-fail-timeout: -1
  
  # H2 인메모리 데이터베이스 (개발/테스트용)
  datasource:
    url: jdbc:h2:mem:testdb
    driver-class-name: org.h2.Driver
    username: sa
    password:

  # JPA
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        # H2 사용 시
        dialect: org.hibernate.dialect.H2Dialect
        # PostgreSQL 사용 시 (위 datasource 주석 해제 시)
        # dialect: org.hibernate.dialect.PostgreSQLDialect
    open-in-view: false
  
  # H2 콘솔 활성화 (개발용)
  h2:
    console:
      enabled: true
      path: /h2-console

  # Redis (선택사항 - 없어도 애플리케이션 실행 가능)
  data:
    redis:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}
      password: ${REDIS_PASSWORD:}
      timeout: 2000ms

# Supabase
supabase:
  url: ${SUPABASE_URL}
  service-role-key: ${SUPABASE_SERVICE_ROLE_KEY}

# JWT
jwt:
  secret: ${JWT_SECRET}
  access-token-expiration: ${JWT_ACCESS_TOKEN_EXPIRATION:3600000} # 1 hour
  refresh-token-expiration: ${JWT_REFRESH_TOKEN_EXPIRATION:604800000} # 7 days

# Google Gemini API
gemini:
  api-key: ${GEMINI_API_KEY:}
  model: gemini-pro

# Server
server:
  port: ${SERVER_PORT:8080}

# Swagger Configuration
swagger:
  server-url: "" # Empty for local development (auto-detect)

# CORS Configuration
cors:
  allowed-origins: "*"  # Development: allow all origins. Production: specify exact domains
  allowed-methods: GET,POST,PUT,PATCH,DELETE,OPTIONS
  allowed-headers: "*"
  exposed-headers: Authorization
  allow-credentials: false  # Set to true if you need to send cookies/credentials
  max-age: 3600

# Logging
logging:
  level:
    com.onewave.server: DEBUG
    org.springframework.security: DEBUG
